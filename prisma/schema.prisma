// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["i18n-agent"]
}

// 语言表 - 存储支持的语言列表
model Language {
  id          String   @id @default(cuid())
  code        String   @unique // 语言代码，如 en, zh-CN, ja, fr
  name        String   // 语言名称，如 English, 简体中文
  isActive    Boolean  @default(true) // 是否启用
  isDefault   Boolean  @default(false) // 是否为默认语言
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  translations Translation[]

  @@index([code])
  @@index([isActive])
  @@map("languages")
  @@schema("i18n-agent")
}

// 翻译表 - 存储文本在不同语言下的翻译
model Translation {
  id          String    @id @default(cuid())
  key         String    // 翻译键，如 "common.welcome", "button.submit"
  languageId  String    // 关联的语言ID
  value       String    @db.Text // 翻译后的文本
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  language    Language  @relation(fields: [languageId], references: [id], onDelete: Cascade)

  @@unique([key, languageId]) // 确保同一语言下，key 的唯一性
  @@index([languageId])
  @@index([key])
  @@map("translations")
  @@schema("i18n-agent")
}
