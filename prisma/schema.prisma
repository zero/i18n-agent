generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["i18n-agent"]
}

// 语言表 - 使用语言代码作为主键
model Language {
  code        String   @id // 语言代码作为主键 (en, zh-CN, ja, etc.)
  name        String   // 语言名称 (English, 简体中文, etc.)
  isActive    Boolean  @default(true) // 是否启用
  isDefault   Boolean  @default(false) // 是否为默认语言
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  translations Translation[]

  @@index([isActive])
  @@map("languages")
  @@schema("i18n-agent")
}

// 翻译表 - 使用语言代码和翻译键作为复合主键
model Translation {
  languageCode  String  // 语言代码 (en, zh-CN, etc.)
  key           String  // 翻译键 (common.welcome, button.submit, etc.)
  value         String  @db.Text // 翻译文本
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  language      Language @relation(fields: [languageCode], references: [code], onDelete: Cascade)

  @@id([languageCode, key]) // 复合主键：语言代码 + 翻译键
  @@index([key]) // 索引翻译键，方便按 key 查询
  @@map("translations")
  @@schema("i18n-agent")
}
